<meta charset="utf-8">
<style type="text/css">
	body{background-color: #f3f4f6;}
</style>
<script>			
	if(typeof(requreLib)!="undefined"){
		requreLib.setplugs("icheck,select2");
	}
</script>
 
 <script>
	$(function(){
	        	$('input').not(".switchs").iCheck({
	        	 	   checkboxClass: 'icheckbox_minimal-blue',
					   radioClass: 'iradio_minimal-blue',
					  
	        	 });  
	
	            $("#selectAll").on("ifChecked",function(){
	                $('input:checkbox').iCheck('check');
	            });
	
	            $("#selectAll").on("ifUnchecked",function(){
	                $('input:checkbox').iCheck('uncheck');
	            });
	            
	            //新建任务阶段
	            $(".add-task-phase").click(function(){
	            	$(this).hide();
	            	$(this).siblings(".task-phase-title").show();
	            });
	            //取消新建任务
	            $(".cancel-add-phase").click(function(){
	            	$(this).parents(".task-phase-title").hide();
	            	$(this).parent().parent().parent().siblings(".add-task-phase").show();
	            });
	            //创建
	            $(".create-btn").click(function(){
	            	var phase_name = $(this).parents(".task-phase-title").find("input").val();
	            	$(this).parents("li").find(".add-task").show();
	            	$(this).parents("li").find(".add-task-btn-con").show();
	            	$(this).parents("li").find(".phase-title").html(phase_name);
	            	$(this).parents("li").find(".add-task-phase").hide();
	            	$(this).parents("li").find(".task-phase-title").hide();
	            });
	            //重命名
	            $("#rename").click(function(){
	            	$(this).parents("li").find(".phase-name-input").show();
	            	$(this).parents("li").find(".phase-name-input").siblings().hide();
	            	$(this).parents("li").find(".task-phase-title").show();
	            	$(this).parents("li").find(".add-task").find("span").hide();
	            	$(this).parents("li").find(".phase-name-input").attr("flag","true");
	            	//$(this).parents("li").find(".add-task-btn").show() 
	            });
	            $(".phase-name-input").blur(function(){
	            	//var this = $(this);
	            	var flag = $(this).attr("flag");
	            	if(flag=="true"){
	            		var text = $(this).val();
	            		$(this).parents("li").find(".phase-title").html(text);
	            		$(this).hide();
	            		$(this).parents("li").find(".add-task").show();
	            		$(this).parents("li").find(".add-task").find("span").show();
	            	}
	            });
	            //新建任务
	            $(".add-task-btn").click(function(){
	            	$(this).parent().hide();
	            	$(this).parents("li").find(".add-task-main").show();
	            });
	            //取消新建任务
	            $(".cancel-task-btn").click(function(){
	            	$(this).parents("li").find(".add-task-main").hide();
	            	$(this).parents("li").find(".add-task-btn").parent().show();
	            });
	            //确定创建任务
	            $(".create-task-btn").click(function(){
	            	$(this).parents("li").find(".add-task-main").hide();
	            	$(this).parents("li").find(".comlepte-task").show();
	            	$(this).parents("li").find(".add-task-btn-con").show();
	            });
	          
	        });
</script>
		

	<div class="RedSea RedSea-task-label">
		<ul>
			<li>
				<div class="add-task-phase">新建任务阶段</div>
				
				<div class="task-phase-title" style="display: none;">
					<input class="form-control input-sm phase-name-input " type="text" placeholder="新建任务阶段" />
					<div class="mgt-10 clearfix" >
						<span class="pull-left"><button type="button" class="btn btn-default but-border btn-sm create-btn">创建</button></span>
						<span class="pull-right"><span class="iconfont icon-chahao cancel-add-phase "></span></span>
					</div>
				</div>
				
				<div class="clearfix add-task mgt-5" style="display: none">
					<span class="pull-left phase-title"></span>
					<span class="pull-right" style="position: relative;">
						<span class="glyphicon glyphicon-info-sign rename  dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></span>
						<ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="min-width: auto;">
						    <li><a href="#" id="rename">重命名</a></li>
						    <li><a href="#">删除</a></li>
						 </ul>
					</span>
				</div>
				<!--创建任务完成 star-->
				<div class="comlepte-task mgt-20" id="comlepte-task" style="display: none;">
					<ul>
						<li class="clearfix">
							<div class="pull-left">
								<img src="/RedseaPlatform/projectManagement/img/user.jpg" />
							</div>
							<div class="pull-right c-task-r">
								<div class="">
									单元测试
								</div>
								<div class="clearfix mgt-5">
									<span class="pull-left"><span class="state-lable">进行中</span></span>
									<span class="pull-right time"><span class="glyphicon glyphicon-time"></span>12月12日</span>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<!--创建任务完成 end-->
				
				<div class="pdt-20 clear add-task-btn-con" style="display:none">
					<button class="btn btn-default btn-sm but-border add-task-btn" type="button" style="width: 100%;">新建任务</button>
				</div>
				
				<div class="add-task-con mgt-20 add-task-main" style="display: none;">
					<textarea class="form-control" rows="2" placeholder="任务名称"></textarea>
					<div class="input-group input-group-sm mgt-10">
						<input type="text" class="form-control" placeholder="开始时间" />
						<span class="input-group-addon">~</span>
						<input type="text" class="form-control" placeholder="截止时间" />
					</div>
					<div class="input-group input-group-sm mgt-10">
						<input type="text" class="form-control" placeholder="负责人" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-user"></span></button>
							<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-trash"></span></button>
						</span>
					</div>
					<div class="mgt-10">
						<dl class="RedSea-form-seltap">
							<dt style="font-weight: normal; color:#000">任务成员：</dt>
							<dd>
								<em class="eq2"><a><i class="icon-plus"></i>选择任务成员</a></em>
							</dd>
						</dl>	
						<dl class="RedSea-form-seltap clearfix">
							<dd>
								<em class="eq1"><span>张三峰<i class=" icon-remove"></i></span></em>
							</dd>
							<dd>
								<em class="eq1"><span>张三峰<i class=" icon-remove"></i></span></em>
							</dd>
						</dl>	
					</div>
					<div class="input-group input-group-sm mgt-10">
						<span class="input-group-addon">任务标签</span>
						<select class="form-control input-sm">
							<option>未设置</option>
							<option>次要</option>
							<option>一般</option>
							<option>重要</option>
						</select>
					</div>
					<div class="input-group input-group-sm mgt-10">
						<span class="input-group-addon">计划工时</span>
						<input type="text" class="form-control" placeholder="小时" />
						<span class="input-group-addon">h</span>
					</div>
					<div class="mgt-10">
						<dl class="RedSea-form-seltap">
							<dt style="font-weight: normal; color:#000">旁观者：</dt>
							<dd>
								<em class="eq2"><a><i class="icon-plus"></i>选择旁观者</a></em>
							</dd>
						</dl>	
						<dl class="RedSea-form-seltap">
							<dd style="margin-left: 0;">
								<em class="eq1"><span>张三峰<i class=" icon-remove"></i></span></em>
							</dd>
						</dl>	
					</div>
					<div class="mgt-10">
						<input type="checkbox" /> 启用任务审核
					</div>
					<div class="input-group input-group-sm mgt-10">
						<input type="text" class="form-control" placeholder="审核人" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-user"></span></button>
							<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-trash"></span></button>
						</span>
					</div>
					<div class="input-group input-group-sm mgt-10">
						<span class="input-group-addon">反馈提醒</span>
						<select class="form-control input-sm">
							<option>不启用</option>
							<option>每天</option>
							<option>每周</option>
						</select>
					</div>
				</div>
				<div class="mgt-10 clearfix add-task-main" style="display: none;">
					<span class="pull-left"><button type="button" class="btn btn-default but-border btn-sm create-task-btn">创建</button></span>
					<span class="pull-right"><span class="iconfont icon-chahao cancel-task-btn cursor" style="font-size: 22px;"></span></span>
				</div>
			</li>
		</ul>
		
	</div>
					
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
